enable
!delete vlan.dat
configure terminal
hostname MLS1
no ip domain-lookup
banner motd #Verboden toegang voor onbevoegde!#
line console 0
 exec-timeout 60 0
 logging synchronous
 exit
enable secret class
username user priv 15 password cisco
aaa new-model
aaa authentication login MGT local
line vty 0 4
 transport input ssh
 login authentication MGT
 exec-timeout 60
 logging synchronous
 exit
ip domain-name hhs.nl
!crypto key zeroize rsa
crypto key generate rsa general-keys modulus 2048

!Miscellaneous System Config
ip routing
!Vlan Config
vlan 10
name vlan10
vlan 20
name vlan20
vlan 30
name voice

!Port Config
interface GigabitEthernet 1/0/1
  switchport mode trunk
  switchport trunk allow vlan 10,20,30
 description Link to AlS1 gig0/1
 service-policy output MLS-QOS
 no shutdown
exit
interface GigabitEthernet 1/0/2
no switchport
 ip address 10.0.0.1 255.255.255.0
 description Link to AlS2 gig0/1
 service-policy output MLS-QOS
 no shutdown
exit
interface vlan10
 ip address 10.0.1.1 255.255.255.0
 no shutdown
exit
interface vlan20
 ip address 10.0.2.1 255.255.255.0
 no shutdown
exit
interface vlan30
 ip address 10.0.3.1 255.255.255.0
 no shutdown
exit


!Spanning Tree Config

!EtherChannels Config


!OSPF Config
router ospf 1
 network 10.0.0.0 0.0.0.255 area 0
 network 10.0.1.0 0.0.0.255 area 0
 network 10.0.2.0 0.0.0.255 area 0
 network 10.0.3.0 0.0.0.255 area 0
exit
!DHCP Config
service dhcp
ip dhcp excluded-address 10.0.1.1 10.0.1.9
ip dhcp excluded-address 10.0.1.51 10.0.1.254
ip dhcp pool VLAN10
 network 10.0.1.0 255.255.255.0
 default-router 10.0.1.1

ip dhcp excluded-address 10.0.2.1 10.0.2.9
ip dhcp excluded-address 10.0.2.51 10.0.2.254
ip dhcp pool VLAN20
 network 10.0.2.0 255.255.255.0
 default-router 10.0.2.1

ip dhcp excluded-address 10.0.3.1 10.0.3.10
ip dhcp excluded-address 10.0.3.51 10.0.3.254
ip dhcp pool VLAN30
 network 10.0.3.0 255.255.255.0
 default-router 10.0.3.1
 option 150 ip 10.0.3.1

!NAT Config

! Enable QoS
mls qos

! ACLs for matching traffic
ip access-list extended WEB_SERVER
 remark Match traffic to/from webserver 10.0.0.10
 permit ip host 10.0.0.10 any
 permit ip any host 10.0.0.10
exit

ip access-list extended VOICE_VLAN
 remark Match voice traffic in VLAN 30 (10.0.3.0/24)
 permit ip 10.0.3.0 0.0.0.255 any
 permit ip any 10.0.3.0 0.0.0.255
exit

! Class-maps using ACLs (Packet Tracer compatible)
class-map match-any WEB_SERVER
 match access-group name WEB_SERVER
exit

class-map match-any VOICE_TRAFFIC
 match access-group name VOICE_VLAN
exit

! Policy-map assigning bandwidth / priority (no DSCP)
policy-map MLS-QOS
 class VOICE_TRAFFIC
  priority 512
 class WEB_SERVER
  bandwidth percent 20
 class class-default
  shape average 2000000
exit

end
clock set 11:54:47 11 Dec 2025
!copy running-config startup-config
